{"ast":null,"code":"import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"container\"\n};\nconst _hoisted_2 = {\n  class: \"content\"\n};\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"footer\", null, \"textbox\", -1 /* HOISTED */);\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"header\", null, _toDisplayString($setup.nickname.value), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_2, [_createVNode($setup[\"SentTextMessage\"], {\n    content: \"Test Sent Message\"\n  }), _createVNode($setup[\"ReceivedTextMessage\"], {\n    content: \"Test Sent Message\"\n  })]), _hoisted_3]);\n}","map":{"version":3,"names":["class","_createElementVNode","_createElementBlock","_hoisted_1","_toDisplayString","$setup","nickname","value","_hoisted_2","_createVNode","content","_hoisted_3"],"sources":["D:\\UserData\\Desktop\\UEK\\PSM\\KKDP\\psm-project\\src\\components\\MessagesPage.vue"],"sourcesContent":["<template>\r\n    <div class=\"container\">\r\n        <header>{{ nickname.value }}</header>\r\n        <div class=\"content\">\r\n            <SentTextMessage content=\"Test Sent Message\"></SentTextMessage>\r\n            <ReceivedTextMessage content=\"Test Sent Message\"></ReceivedTextMessage>\r\n        </div>\r\n        <footer>textbox</footer>\r\n    </div>\r\n</template>\r\n\r\n<style>\r\n    .container {\r\n        display: flex;\r\n        flex-direction: column;\r\n        height: 100%;\r\n        width: 100%;\r\n    }\r\n\r\n    .container header, footer {\r\n        padding: 10px;\r\n    }\r\n    .container .content {\r\n        flex: 1 1 auto;\r\n        display: flex;\r\n        flex-direction: column-reverse;\r\n        overflow-y: auto;\r\n        min-height: 0px;\r\n    }\r\n\r\n    .sentMessage {\r\n        margin-left: 30%;\r\n        margin-right: 5px;\r\n        align-self: flex-end;\r\n        background-color: gray;\r\n    }\r\n\r\n    .sentMessage, .receivedMessage {\r\n        word-wrap: break-word;\r\n        text-align: left;\r\n        border-radius: 15px;\r\n        padding: 10px;\r\n        max-width: 70%;\r\n        margin-top: 5px;\r\n    }\r\n\r\n    .receivedMessage {\r\n        margin-right: 30%;\r\n        margin-left: 5px;\r\n        align-self: flex-start;\r\n        background-color:aqua;\r\n    }\r\n\r\n\r\n</style>\r\n\r\n<script setup>\r\n    import { useRoute } from 'vue-router';\r\n    import { onMounted, ref } from 'vue';\r\n    import { firebaseApp } from '@/firebase';\r\nimport { and, collection, doc, getDoc, getDocs, getFirestore, or, orderBy, query, where } from 'firebase/firestore';\r\nimport { useAuthStore } from '@/stores/auth';\r\nimport SentTextMessage from './messages/SentTextMessage.vue';\r\nimport ReceivedTextMessage from './messages/ReceivedTextMessage.vue';\r\n    const route = useRoute();\r\n    const auth = useAuthStore();\r\n\r\n    let nickname = ref('');\r\n    let messages = ref([]);\r\n    onMounted(() => {\r\n        const db = getFirestore(firebaseApp)\r\n        const messagesColRef = collection(db, \"messages\");\r\n        const userDocRef = doc(db, \"users\", route.params.uid);\r\n\r\n        getDoc(userDocRef)\r\n        .then((snapshot) => {\r\n            if(snapshot.exists()) {\r\n                nickname.value = snapshot.data().nickname;\r\n            }\r\n        })\r\n\r\n        const q = query(messagesColRef, or(and(where('from', '==', auth.user.uid), where('to', '==', route.params.uid)), (where('to', '==', auth.user.uid), where('from', '==', route.params.uid))), orderBy('timestamp'));\r\n        getDocs(q)\r\n        .then((snapshot) => {\r\n            snapshot.forEach((doc) => {\r\n                let data = doc.data();\r\n                messages.value.push(data);\r\n            });\r\n            console.log(messages);\r\n        })\r\n    });\r\n\r\n</script>"],"mappings":";;EACSA,KAAK,EAAC;AAAW;;EAEbA,KAAK,EAAC;AAAS;gCAIpBC,mBAAA,CAAwB,gBAAhB,SAAO;;uBANnBC,mBAAA,CAOM,OAPNC,UAOM,GANFF,mBAAA,CAAqC,gBAAAG,gBAAA,CAA1BC,MAAA,CAAAC,QAAQ,CAACC,KAAK,kBACzBN,mBAAA,CAGM,OAHNO,UAGM,GAFFC,YAAA,CAA+DJ,MAAA;IAA9CK,OAAO,EAAC;EAAmB,IAC5CD,YAAA,CAAuEJ,MAAA;IAAlDK,OAAO,EAAC;EAAmB,G,GAEpDC,UAAwB,C","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}