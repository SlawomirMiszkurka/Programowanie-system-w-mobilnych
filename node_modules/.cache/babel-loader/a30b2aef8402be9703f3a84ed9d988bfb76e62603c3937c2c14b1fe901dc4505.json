{"ast":null,"code":"import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"container\"\n};\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"div\", null, \"test 1\", -1 /* HOISTED */);\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"div\", null, \"test 2\", -1 /* HOISTED */);\nconst _hoisted_4 = [_hoisted_2, _hoisted_3];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [..._hoisted_4]);\n}","map":{"version":3,"names":["class","_createElementVNode","_hoisted_2","_hoisted_3","_createElementBlock","_hoisted_1","_hoisted_4"],"sources":["D:\\UserData\\Desktop\\UEK\\PSM\\KKDP\\psm-project\\src\\components\\MessagesListPage.vue"],"sourcesContent":["<template>\r\n    <div class=\"container\">\r\n        <div>test 1</div>\r\n        <div>test 2</div>\r\n    </div>\r\n</template>\r\n<style>\r\n    body {\r\n            font-family: Arial, sans-serif;\r\n            margin: 0;\r\n            padding: 0;\r\n            display: flex;\r\n            /* justify-content: center; */\r\n            /* align-items: center; */\r\n            height: 100vh;\r\n            background-color: #f0f0f0;\r\n        }\r\n\r\n        .container {\r\n            text-align: center;\r\n            display:flex;\r\n            flex-direction: column;\r\n        }\r\n\r\n        input[type=\"text\"],\r\n        input[type=\"password\"],\r\n        select,\r\n        textarea,\r\n        button {\r\n            margin: 10px;\r\n            padding: 10px;\r\n            font-size: 16px;\r\n            border-radius: 5px;\r\n            border: 1px solid #ccc;\r\n            width: 300px;\r\n            max-width: 100%;\r\n        }\r\n\r\n        button {\r\n            cursor: pointer;\r\n            background-color: #007bff;\r\n            color: #fff;\r\n            border: none;\r\n        }\r\n\r\n        button:hover {\r\n            background-color: #0056b3;\r\n        }\r\n\r\n        .error-msg {\r\n            color: red;\r\n        }\r\n</style>\r\n<script setup>\r\n    import { firebaseApp } from '@/firebase';\r\nimport { useAuthStore } from '@/stores/auth';\r\nimport { collection, doc, getDoc, getDocs, getFirestore, or, query, where } from 'firebase/firestore';\r\nimport { onMounted } from 'vue';\r\n\r\n    onMounted(() => {\r\n        const db = getFirestore(firebaseApp);\r\n        const messagesColRef = collection(db, \"messages\");\r\n        const auth = useAuthStore();\r\n\r\n        const q = query(messagesColRef, or(where('from', '==', auth.user.uid),\r\n        where('to', '==', auth.user.uid)\r\n        ))\r\n\r\n        const uniqueRecipents = [];\r\n\r\n        getDocs(q)\r\n        .then((snapshot) => {\r\n            snapshot.forEach((doc) => {\r\n                let data = doc.data();\r\n\r\n                if(data.from != auth.user.uid && !uniqueRecipents.includes(data.from)) {\r\n                    uniqueRecipents.push(data.from);\r\n                }\r\n\r\n                if(data.to != auth.user.uid && !uniqueRecipents.includes(data.to)) {\r\n                    uniqueRecipents.push(data.to);\r\n                }\r\n            })\r\n\r\n            let uniqueRecipentsData = [];\r\n\r\n            uniqueRecipents.forEach(recipent => {\r\n                const recipentDoc = doc(db, \"users\", recipent);\r\n                getDoc(recipentDoc)\r\n                .then((snapshot) => {\r\n                    if(snapshot.exists()) {\r\n                        uniqueRecipentsData.push({\r\n                            'uid': recipent,\r\n                            nickname: snapshot.data().nickname\r\n                        });\r\n                    }\r\n                });\r\n            });\r\n\r\n            console.log(uniqueRecipentsData);\r\n        })\r\n\r\n\r\n    });\r\n</script>"],"mappings":";;EACSA,KAAK,EAAC;AAAW;gCAClBC,mBAAA,CAAiB,aAAZ,QAAM;gCACXA,mBAAA,CAAiB,aAAZ,QAAM;oBADXC,UAAiB,EACjBC,UAAiB,C;;uBAFrBC,mBAAA,CAGM,OAHNC,UAGM,EAJV,IAAAC,UAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}